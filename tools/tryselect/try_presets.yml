---
# Presets defined here will be available to all users. Run them with:
#   $ mach try --preset <name>
#
# If editing this file, make sure to run:
#   $ mach python-test tools/tryselect/test/test_presets.py
#
# Descriptions are required. Please keep this in alphabetical order.

# yamllint disable rule:line-length

debugger-tests:
    selector: fuzzy
    description: >-
        Runs the tests relevant to the Firefox Devtools Debugger
    query:
        - "'debugger"
        - "'mozlint-eslint"
        - "!asan 'devtools !shippable | 'linux32 | 'macosx64"
        - "!android !asan 'linux32 | 'macosx64 | !shippable 'mochitest-chrome | 'mochitest-clipboard"
        - "!asan !shippable 'linux64/ 'xpcshell"
        - "!qr !macosx !shippable 'damp"

perf:
    selector: fuzzy
    description: >-
        Runs all performance (raptor and talos) tasks across all platforms.
        This preset can be filtered down further (e.g to limit it to a specific
        platform) via |mach try --preset perf -xq "'windows"|.

        Android hardware platforms are excluded due to resource limitations.
    query:
        - "^test- !android-hw 'raptor | 'talos"
    rebuild: 5

sample-suites:
    selector: fuzzy
    description: >-
        Runs one chunk of every test suite plus all suites that aren't chunked.
        It is useful for testing infrastructure changes that can affect the
        harnesses themselves but are unlikely to break specific tests.
    query:
        - ^test- -1$
        # Only run a single talos + raptor suite per platform
        - ^test- !1$ !2$ !3$ !4$ !5$ !6$ !7$ !8$ !9$ !0$ !raptor !talos
        - ^test- 'raptor-speedometer | 'talos-g1
