<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
  <head>
    <style>
      div { color: green; }

      #test1, #test2 {
        -moz-binding: url(403962-1xbl.xml#test);
      }
    </style>
  </head>
  <body onload="runTest()">
    <div id="test1"/>
    <div id="test2">
      <!-- Make the script load, so the binding loads first -->
      <script src="data:text/javascript,document.body.offsetWidth;"/>
      <!-- The whitespace here is important... or this comment will do
           the trick too -->
      <span>&#xA0;test</span>
    </div>
    <script>
      function runTest() {
        var n = document.getElementById("test1");
        n.appendChild(makeSpan());

        document.documentElement.className = "";
      }

      function makeSpan() {
        var s = document.createElementNS("http://www.w3.org/1999/xhtml",
                                         "span");
        s.appendChild(document.createTextNode("&#xA0;test"));
        return s;
      }      
    </script>
  </body>
</html>
