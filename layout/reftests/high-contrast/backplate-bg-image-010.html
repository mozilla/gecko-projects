<!DOCTYPE html>
<html>
<head>
  <title>Only lines containing visible content (visibility: visible) should receive backplates.</title>
  <style>
    body {
      background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8%2F9hAAAABGdBTUEAALGPC%2FxhBQAAABh0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjAxHK4kRQAAABpJREFUOMtjZBCu%2F89AAWAcNWDUgFEDhosBAObLGSGp9PphAAAAAElFTkSuQmCC");
    }
    .hidden {
      visibility: hidden;
    }
    .visible {
      visibility: visible;
    }
  </style>
</head>
<body>
  <div>
    AAAA<!-- no whitespace between elements
    --><div class="hidden">BBBB</div><!-- no whitespace between elements
    -->CCCC<!-- no whitespace between elements
    --><div class="hidden">
      DDDD
      <div class="visible">EEEE</div>
      FFFF
    </div>
  </div>
  GGGG
  <br>
  HHHH
  <span class="hidden">IIII</span>
  JJJJ
  <span class="hidden">
    KKKK
    <span class="visible">LLLL</span>
    MMMM
  </span>
  NNNN
  <span class="hidden">
    <span style="display:inline-block">
      1
      <span class="visible">2</span>
    </span>
    <span style="display:inline-block" class="visible">
      3
    </span>
    4<!-- no whitespace between elements
  --></span>
</body>
</html>
